@page "/"
@inject IJSRuntime JS

<PageTitle>Lista zadań</PageTitle>

<div class="task-page">
    <h2>Panel Administratora</h2>

    <form id="taskForm">
        <h3>Dodaj zadanie</h3>
        <input type="text" id="taskInput" placeholder="Treść zadania" required />
        <input type="text" id="assigneeInput" placeholder="Pracownicy (oddzieleni średnikiem)" />
        <button type="submit">Dodaj</button>
    </form>

    <h3>Lista zadań</h3>
    <div id="taskList">Ładowanie...</div>

    <h3>Zadania ukryte</h3>
    <div id="hiddenTaskList"></div>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("eval", await System.IO.File.ReadAllTextAsync("wwwroot/task-script.js"));
        }
    }
}
